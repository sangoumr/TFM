<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TFM - Geopolitical Trend in Real Time from News: CODI.train_model Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TFM - Geopolitical Trend in Real Time from News<span id="projectnumber">&#160;1</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('namespace_c_o_d_i_1_1train__model.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">CODI.train_model Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9f06a21f71b4a95ea437182d029e0a23" id="r_a9f06a21f71b4a95ea437182d029e0a23"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f06a21f71b4a95ea437182d029e0a23">get_models_weight</a> (DataFrame df_final)</td></tr>
<tr class="memdesc:a9f06a21f71b4a95ea437182d029e0a23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Train the Logistic Regression, and Naive Bayes prediction model as a base, with old news from the New York Times from the last 50 years.  <br /></td></tr>
<tr class="separator:a9f06a21f71b4a95ea437182d029e0a23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff890e360700588b7a0bd4cc879836ed" id="r_aff890e360700588b7a0bd4cc879836ed"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aff890e360700588b7a0bd4cc879836ed">get_words_coefficients</a> ()</td></tr>
<tr class="separator:aff890e360700588b7a0bd4cc879836ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a08243e583bf010117932e306ef8c64fd" id="r_a08243e583bf010117932e306ef8c64fd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a08243e583bf010117932e306ef8c64fd">script_dir</a> = os.path.dirname(os.path.abspath(__file__))</td></tr>
<tr class="separator:a08243e583bf010117932e306ef8c64fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a257002a198e0c94ff71db14b3a45a539" id="r_a257002a198e0c94ff71db14b3a45a539"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a257002a198e0c94ff71db14b3a45a539">my_spark</a> = SparkSession.builder.appName(&quot;prepare_dataset&quot;).getOrCreate()</td></tr>
<tr class="separator:a257002a198e0c94ff71db14b3a45a539"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4d06b05a19b0b9059e82d2337470fe7" id="r_af4d06b05a19b0b9059e82d2337470fe7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af4d06b05a19b0b9059e82d2337470fe7">df_final_old_news</a></td></tr>
<tr class="separator:af4d06b05a19b0b9059e82d2337470fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9f06a21f71b4a95ea437182d029e0a23" name="a9f06a21f71b4a95ea437182d029e0a23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f06a21f71b4a95ea437182d029e0a23">&#9670;&#160;</a></span>get_models_weight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None CODI.train_model.get_models_weight </td>
          <td>(</td>
          <td class="paramtype">DataFrame</td>          <td class="paramname"><span class="paramname"><em>df_final</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Train the Logistic Regression, and Naive Bayes prediction model as a base, with old news from the New York Times from the last 50 years. </p>
<p>Create a Tokenizer, CountVectorizer, TF-IDF, a logistic regression object, and add everything to a pipeline. Also make the same pipeline with Naive Bayes. And tune de params with grid and CrossValidator for bouth classivfiers with train set, and compare test set predictions with AUC metric. Since the best results are given by the Logistic Regression Model with the cross validation of the parameter search, this will be the model that is kept for the predictions of the news that are downloaded daily.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">df_final</td><td>(DataFrame): Dataset to use in train models.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<pre class="fragment"> Train the Logistic Regression, and Naive Bayes prediction model as a base, with old news
    from the New York Times from the last 50 years.

    Create a Tokenizer, CountVectorize, TF-IDF, a logistic regression object, and add everything to
    a pipeline.
    Also make the same pipeline with Naive Bayes.
    And tune de params with grid and CrossValidator for bouth classivfiers with train set, and
    compare test set predictions with AUC metric.

    Since the best results are given by the Logistic Regression Model with the cross validation
    of the parameter search, this will be the model that is kept for the predictions of the news
    that are downloaded daily.

Args:
    df_final (DataFrame): Dataset to use in train models.
</pre> 
</div>
</div>
<a id="aff890e360700588b7a0bd4cc879836ed" name="aff890e360700588b7a0bd4cc879836ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff890e360700588b7a0bd4cc879836ed">&#9670;&#160;</a></span>get_words_coefficients()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None CODI.train_model.get_words_coefficients </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment"> Get concerns words and its coefficients from best model, and save as CSV to show in
    visualization.
</pre> 
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af4d06b05a19b0b9059e82d2337470fe7" name="af4d06b05a19b0b9059e82d2337470fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4d06b05a19b0b9059e82d2337470fe7">&#9670;&#160;</a></span>df_final_old_news</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CODI.train_model.df_final_old_news</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  get_dataset_old_news_weight(my_spark,</div>
<div class="line"><span class="lineno">    2</span>                                                    PATH_HDFS_OLD_NEWS_CLEANED,</div>
<div class="line"><span class="lineno">    3</span>                                                    iso_code=<span class="stringliteral">&#39;us&#39;</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a257002a198e0c94ff71db14b3a45a539" name="a257002a198e0c94ff71db14b3a45a539"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a257002a198e0c94ff71db14b3a45a539">&#9670;&#160;</a></span>my_spark</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CODI.train_model.my_spark = SparkSession.builder.appName(&quot;prepare_dataset&quot;).getOrCreate()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a08243e583bf010117932e306ef8c64fd" name="a08243e583bf010117932e306ef8c64fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08243e583bf010117932e306ef8c64fd">&#9670;&#160;</a></span>script_dir</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CODI.train_model.script_dir = os.path.dirname(os.path.abspath(__file__))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_c_o_d_i.html">CODI</a></li><li class="navelem"><a class="el" href="namespace_c_o_d_i_1_1train__model.html">train_model</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
