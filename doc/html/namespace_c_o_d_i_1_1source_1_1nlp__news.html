<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TFM - Geopolitical Trend in Real Time from News: CODI.source.nlp_news Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TFM - Geopolitical Trend in Real Time from News<span id="projectnumber">&#160;1</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('namespace_c_o_d_i_1_1source_1_1nlp__news.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">CODI.source.nlp_news Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a57bad5496676a43879633e1cc8ef19a5" id="r_a57bad5496676a43879633e1cc8ef19a5"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a57bad5496676a43879633e1cc8ef19a5">nlp_proces_news</a> (my_spark, list list_dirs_countries, str col_desc, str hdfs_file_cleaned, str local_file)</td></tr>
<tr class="memdesc:a57bad5496676a43879633e1cc8ef19a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Preprocess old news and last news for training models and to visualize in Power BI.  <br /></td></tr>
<tr class="separator:a57bad5496676a43879633e1cc8ef19a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a57bad5496676a43879633e1cc8ef19a5" name="a57bad5496676a43879633e1cc8ef19a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57bad5496676a43879633e1cc8ef19a5">&#9670;&#160;</a></span>nlp_proces_news()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None CODI.source.nlp_news.nlp_proces_news </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>my_spark</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list</td>          <td class="paramname"><span class="paramname"><em>list_dirs_countries</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>col_desc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>hdfs_file_cleaned</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>local_file</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Preprocess old news and last news for training models and to visualize in Power BI. </p>
<p>Create a Document Assembler, Tokenizer, LemmatizerModel, normalizer, StopWordsCleaner, and Named Entity Recognition (Bert model trained) objects, and add everything to a pipeline. After run pipeline for each country directory given as a list, to get last date of news processed and start to process news till today. Then remove excluded NER, convert tokens to lower, remove some words about time and www, http,..., group tokens of news of each country by day. Finally save then into hdfs and local csv to use in Power bi visualization.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">my_pspark</td><td>(SparkSession): Spark sesion. </td></tr>
    <tr><td class="paramname">list_dirs_countries</td><td>(list): List of dirs to be processed. </td></tr>
    <tr><td class="paramname">col_desc</td><td>(str): Collumn name to be processed. </td></tr>
    <tr><td class="paramname">hdfs_file_cleaned</td><td>(str): hdfs path to save news processed in parquet format. </td></tr>
    <tr><td class="paramname">local_file</td><td>(str): Local path and file name to add news processed.</td></tr>
  </table>
  </dd>
</dl>
<pre class="fragment"> Preprocess news for training models and to visualize in Power BI.
    
    Create a Document Assembler, Tokenizer, LemmatizerModel, normalizer, StopWordsCleaner, and
    Named Entity Recognition (Bert model trained) objects, and add everything to a pipeline.
    After run pipeline for each country directory given as a list, to get last date of news
    processed and start to process news till today. Then remove excluded NER, convert tokens to
    lower, remove some words about time and www, http,..., group tokens of news of each country
    by day. Finally save them into hdfs and local csv to use in Power bi visualization.

Args:
    my_pspark (SparkSession): Spark sesion.
    list_dirs_countries (list): List of dirs to be processed.
    col_desc (str): Collumn name to be processed.
    hdfs_file_cleaned (str): hdfs path to save news processed in parquet format
    local_file (str): Local path and file name to add news processed.

Returns:
    None
</pre> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_c_o_d_i.html">CODI</a></li><li class="navelem"><a class="el" href="namespace_c_o_d_i_1_1source.html">source</a></li><li class="navelem"><a class="el" href="namespace_c_o_d_i_1_1source_1_1nlp__news.html">nlp_news</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
